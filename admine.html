<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qoutok Admin</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@500;700&display=swap" rel="stylesheet">
    <style>
        body { background: #111; color: white; font-family: 'Tajawal'; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        input, textarea { width: 100%; padding: 10px; margin-bottom: 10px; background: #222; border: 1px solid #444; color: white; border-radius: 5px; }
        button { width: 100%; padding: 15px; background: #25f4ee; border: none; color: black; font-weight: bold; cursor: pointer; border-radius: 5px; }
        .card { background: #1a1a1a; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="text-align:center; color:#25f4ee;">Qoutok Control</h1>
        
        <div id="login-area">
            <input type="password" id="admin-pass" placeholder="ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø£Ø¯Ù…Ù†">
            <button onclick="checkPass()">Ø¯Ø®ÙˆÙ„</button>
        </div>

        <div id="dash-area" style="display:none;">
            <div class="card">
                <h3>Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø¹Ø§Ù… ðŸ“¢</h3>
                <input type="text" id="notif-title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± (Ù…Ø«Ù„Ø§Ù‹: ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙŠØ¯)">
                <textarea id="notif-body" rows="3" placeholder="Ù†Øµ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±..."></textarea>
                <button onclick="sendNotification()">Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø¬Ù…ÙŠØ¹</button>
            </div>
            
            <div class="card">
                <h3>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø© ðŸ“Š</h3>
                <p>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„ÙƒÙ„ÙŠ: <span id="posts-count">...</span></p>
            </div>
        </div>
    </div>

    <script>
        // Ù†ÙØ³ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
        const firebaseConfig = {
            apiKey: "AIzaSyAfz9k1oG3rwiv4Lsfy7Dl92PxuzsrYqB8",
            authDomain: "qoutok.firebaseapp.com",
            projectId: "qoutok",
            storageBucket: "qoutok.firebasestorage.app",
            messagingSenderId: "580116525824",
            appId: "1:580116525824:web:d855472417f0682f2c39e5",
            measurementId: "G-RETNEQJCKB"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function checkPass() {
            // ÙƒÙ„Ù…Ø© Ø³Ø± Ø¨Ø³ÙŠØ·Ø© (ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ±Ù‡Ø§)
            if(document.getElementById('admin-pass').value === 'qoutok782007') {
                document.getElementById('login-area').style.display = 'none';
                document.getElementById('dash-area').style.display = 'block';
                loadStats();
            } else {
                alert('Ø®Ø·Ø£!');
            }
        }

        function sendNotification() {
            const title = document.getElementById('notif-title').value;
            const body = document.getElementById('notif-body').value;
            
            if(!title || !body) return alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");

            db.ref('announcements').push({
                title: title,
                body: body,
                date: Date.now()
            }).then(() => {
                alert("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†! âœ…");
            });
        }

        function loadStats() {
            db.ref('posts').on('value', (snap) => {
                document.getElementById('posts-count').innerText = snap.numChildren();
            });
        }
    </script>
</body>
</html>